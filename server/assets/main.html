<!DOCTYPE html>
<html>

<head>
    <link href="https://fonts.googleapis.com/css?family=Roboto:100,300,400,500,700,900" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/@mdi/font@6.x/css/materialdesignicons.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/vuetify@2.x/dist/vuetify.min.css" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no, minimal-ui">
    <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
    <title>Estufa</title>
</head>

<body>

    <div id="app">
        <v-app id="main">
            <v-main>
                <v-container class="ml-3">
                    <span class="text-h4 font-weight-black" id="titulo">ESTUFA
                        AUTOMATIZADA
                    </span>
                </v-container>
                <!-- UMIDADE -->
                <v-container class="ml-3">
                    <div>
                        <span class="text-h6 font-weight-regular" id="titulo-dados">Umidade</span>
                    </div>
                    <div>
                        <span class="text-h3 font-weight-bold" id="titulo-dados">85.4%</span>
                    </div>
                </v-container>

                <!--TEMPERATURA-->
                <v-container class="ml-3">
                    <div>
                        <span class="text-h6 font-weight-regular" id="titulo-dados">Temperatura</span>
                    </div>
                    <div>
                        <span v-if="temperatura == 'Sem conexão!'" class="text-h5 font-weight-bold"
                            id="titulo-dados-erro">{{temperatura}}</span>
                        <span v-else class="text-h3 font-weight-bold" id="titulo-dados">{{temperatura}}</span>
                    </div>
                </v-container>

                <!--LUMINOSIDADE-->
                <v-container class="ml-3">
                    <div>
                        <span class="text-h6 font-weight-regular" id="titulo-dados">Luminosidade</span>
                    </div>
                    <div>
                        <span class="text-h3 font-weight-bold" id="titulo-dados">60%</span>
                    </div>
                </v-container>

                <v-container>
                    <template>
                        <v-tabs slider-color="green" color="green">
                            <v-tab>CONTROLE</v-tab>
                        </v-tabs>
                    </template>
                    <v-container>
                        <v-switch inset label="Bomba D'Água" color="success"></v-switch>
                        <v-switch inset label="Iluminação" color="success"></v-switch>
                        <v-switch inset label="Ventilação" color="success"></v-switch>
                    </v-container>
                </v-container>
            </v-main>
        </v-app>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/vue@2.x/dist/vue.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/vuetify@2.x/dist/vuetify.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>

    <script>
        new Vue({
            el: '#app',
            vuetify: new Vuetify(),

            data: {
                temperatura: '',
                data: null,
                message: ''
            },

            mounted() {
                this.interval = setInterval(() => this.sincronizarComServidor(), 3600)
            },

            methods: {
                sincronizarComServidor: async function () {
                    var response = await fetch('leituras');
                    if (!response.ok) {
                        this.temperatura = 'Sem conexão!';
                    } else {

                        var responseJSON = await response.json();
                        this.temperatura = responseJSON;
                        console.log(this.temperatura)
                    }
                }
            }
        })
    </script>
</body>

</html>